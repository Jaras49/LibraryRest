;
CREATE SEQUENCE PUBLIC.HIBERNATE_SEQUENCE START WITH 65;
CREATE CACHED TABLE PUBLIC.BOOKS(
    ID BIGINT NOT NULL,
    STATUS INTEGER NOT NULL,
    RENT_ID BIGINT,
    TITLE_ID BIGINT
);
CREATE CACHED TABLE PUBLIC.USERS(
    USER_ID BIGINT NOT NULL,
    ACCOUNT_CREATION_DATE TIMESTAMP NOT NULL,
    FIRST_NAME VARCHAR(255) NOT NULL,
    LAST_NAME VARCHAR(255) NOT NULL
);
CREATE CACHED TABLE PUBLIC.TITLES(
    TITLE_ID BIGINT NOT NULL,
    AUTHOR VARCHAR(255) NOT NULL,
    TITLE_NAME VARCHAR(255) NOT NULL,
    YEAR_OF_PUBLICATION INTEGER NOT NULL
);
CREATE CACHED TABLE PUBLIC.RENTS(
    ID BIGINT NOT NULL,
    RENT_DATE TIMESTAMP NOT NULL,
    RETURN_DATE DATE NOT NULL,
    USER_ID BIGINT
);
ALTER TABLE PUBLIC.RENTS ADD CONSTRAINT PUBLIC.CONSTRAINT_4 PRIMARY KEY(ID);
ALTER TABLE PUBLIC.TITLES ADD CONSTRAINT PUBLIC.CONSTRAINT_9 PRIMARY KEY(TITLE_ID);
ALTER TABLE PUBLIC.USERS ADD CONSTRAINT PUBLIC.CONSTRAINT_4D PRIMARY KEY(USER_ID);
ALTER TABLE PUBLIC.BOOKS ADD CONSTRAINT PUBLIC.CONSTRAINT_3 PRIMARY KEY(ID);
INSERT INTO PUBLIC.BOOKS(ID, STATUS, RENT_ID, TITLE_ID) VALUES
(5, 2, NULL, 4),
(6, 3, NULL, 4),
(7, 0, NULL, 4),
(8, 1, 33, 4),
(9, 1, 33, 4),
(11, 1, 33, 10),
(12, 1, 33, 10),
(13, 1, 34, 10),
(14, 2, NULL, 10),
(15, 0, NULL, 10),
(16, 0, NULL, 10);

INSERT INTO PUBLIC.RENTS(ID, RENT_DATE, RETURN_DATE, USER_ID) VALUES
(33, TIMESTAMP '2018-07-05 18:08:32.948', DATE '2018-09-05', 1),
(34, TIMESTAMP '2018-07-05 18:08:43.118', DATE '2018-09-05', 2);

INSERT INTO PUBLIC.TITLES(TITLE_ID, AUTHOR, TITLE_NAME, YEAR_OF_PUBLICATION) VALUES
(4, 'Author', 'BookBook', 1992),
(10, 'testAuthor', 'testBook', 2018);

INSERT INTO PUBLIC.USERS(USER_ID, ACCOUNT_CREATION_DATE, FIRST_NAME, LAST_NAME) VALUES
(1, TIMESTAMP '2018-07-05 17:51:08.918', 'UserTest', 'UserTest'),
(2, TIMESTAMP '2018-07-05 17:51:23.816', 'testUser', 'testUser'),
(3, TIMESTAMP '2018-07-05 17:51:33.002', 'User', 'User');
ALTER TABLE PUBLIC.TITLES ADD CONSTRAINT PUBLIC.UK_4Y8FC99YOGKIUTNHOMMA9LH2P UNIQUE(TITLE_NAME);
ALTER TABLE PUBLIC.BOOKS ADD CONSTRAINT PUBLIC.FKDY2V8WIYPUKK9JDEOWI29W5WU FOREIGN KEY(RENT_ID) REFERENCES PUBLIC.RENTS(ID) NOCHECK;
ALTER TABLE PUBLIC.BOOKS ADD CONSTRAINT PUBLIC.FK6I4NJ1U4KX1J2YOVIIM8HT8S9 FOREIGN KEY(TITLE_ID) REFERENCES PUBLIC.TITLES(TITLE_ID) NOCHECK;
ALTER TABLE PUBLIC.RENTS ADD CONSTRAINT PUBLIC.FK3PF0L216L390R3YA1PK8WVXE9 FOREIGN KEY(USER_ID) REFERENCES PUBLIC.USERS(USER_ID) NOCHECK;
